{% load staticfiles %}
<!DOCTYPE html>
<html>
<head lang="en">
<meta charset="UTF-8">
<title>jQuery手机端注册登录页面代码 - 站长素材</title>
</head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="{% static 'base/css/style.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'base/css/theme.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'base/css/jquery.mobile-1.3.2.min.css' %}">

<body>
 <div data-role="header" data-theme="f">
        <a href="{% url 'wapApp:index' %}" data-ajax="false" class="back" data-role="none" data-direction="reverse"><img src="{% static 'base/images/back.png' %}"></a>

  <h1>登录</h1></div>
    <div data-role="content">
        <div class="login-input-box">
            <form role="form" id="loginform">
            {% csrf_token %}
            <div class="line1">
                <img src="{% static 'base/images/user.png' %}">
                <input id="user" name="user" type="text" class="user" value="用户名" onfocus="if(value=='用户名') {value=''}" onblur="if (value=='') {value='用户名'}" data-role="none">
            </div>
            <div class="line2">
                <img src="{% static 'base/images/mail.png' %}">
                <input id="pass" name="pass" type="text" class="lock" value="密码" onfocus="if(value=='密码') {value=''}" onblur="if (value=='') {value='密码'}" data-role="none">
            </div>
            <div class="chose">
                <a href="{% url 'wapApp:redirectreg' %}" data-ajax="false" class="register" data-role="none" data-transition="slide">注册</a>
                <a href="forget.html"data-ajax="false"  class="forgive" data-role="none">忘记密码</a>
                <a class="login" id="login" data-ajax="false" data-role="none" data-transition="slide">登陆</a>
            </div>
            </form>
        </div>

    </div>
</body>
<script src="{% static 'base/js/jquery-1.8.3.min.js' %}"></script>
<script src="{% static 'base/js/jquery.mobile-1.3.2.min.js' %}"></script>
<script src="{% static 'base/js/main.js' %}"></script>

<script>
    $(document).ready(function() {
        $('#login').click(function(){
            if($('#user').val()=='用户名'||$('#pass').val=='密码'){
                alert('请填写完整注册信息')
                window.location.reload()
            }else{
                    {#                $('#regist').attr('href','#pagetwo')#}
                 $.ajax({
                 url: "/wapApp/login/",
                 type: "POST",
                 data: $("#loginform").serialize(),
                 dataType: "JSON",
                 success: function (d) {
                     if (d.status == 'fail') {
                         alert(d.msg)
                         window.location.reload()
                     }
                      if (d.status == 'not_active') {
                         alert(d.msg)
                         window.location.reload()
                     }
                 }
             })
            }

        })
    })
</script>
</html>